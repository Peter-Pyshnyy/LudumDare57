[gd_scene load_steps=35 format=3 uid="uid://dw5dep2lvaeic"]

[ext_resource type="Script" uid="uid://1i42u7l1byqq" path="res://classes/game.gd" id="1_uwrxv"]
[ext_resource type="PackedScene" uid="uid://cyiacwvceu3mp" path="res://scenes/Objects/hand.tscn" id="2_264po"]
[ext_resource type="Texture2D" uid="uid://x3nmpdhmakcg" path="res://assets/Background/backpack/backpack_back.png" id="4_264po"]
[ext_resource type="Texture2D" uid="uid://btlom8710gcig" path="res://assets/Background/backpack/L13-Layer 10.png" id="5_1kice"]
[ext_resource type="Texture2D" uid="uid://cumihxja0v7bw" path="res://assets/Background/backpack/L12-Layer 11.png" id="6_5newe"]
[ext_resource type="Texture2D" uid="uid://c16eqkoxsbtne" path="res://assets/Background/backpack/L10-Layer 12++.png" id="7_37s47"]
[ext_resource type="Texture2D" uid="uid://cpvo0afsg33at" path="res://assets/Background/backpack/L8-Layer 12+.png" id="8_bt5mj"]
[ext_resource type="Texture2D" uid="uid://do6uhae0tf2k5" path="res://assets/Background/backpack/L9-Layer 13.png" id="9_e1j6l"]
[ext_resource type="Texture2D" uid="uid://6tm1r7qd8rq" path="res://assets/Background/backpack/L2-Layer 19.png" id="10_pl11u"]
[ext_resource type="Texture2D" uid="uid://dqsv4wabtr1y0" path="res://assets/Background/backpack/L7-Layer 14.png" id="11_bhx41"]
[ext_resource type="Texture2D" uid="uid://vnyibalqxe1d" path="res://assets/Background/backpack/nutella.png" id="12_qnb83"]
[ext_resource type="Texture2D" uid="uid://4eieicx0d6fn" path="res://assets/Background/backpack/L5-Layer 18.png" id="13_sww3w"]
[ext_resource type="Texture2D" uid="uid://cmxj3uyjjq841" path="res://assets/Background/backpack/L4-Layer 16.png" id="14_suyxu"]
[ext_resource type="Texture2D" uid="uid://my8k3yqt11fw" path="res://assets/Background/backpack/L3-Layer 15.png" id="15_sgl2t"]
[ext_resource type="Texture2D" uid="uid://mxt52wbeq47b" path="res://assets/Background/backpack/L1-Layer 7.png" id="16_qouja"]
[ext_resource type="Script" uid="uid://djola5gl6hnaf" path="res://classes/nutella.gd" id="17_wljb1"]
[ext_resource type="PackedScene" uid="uid://xstywed8a4ni" path="res://scenes/Objects/zipper.tscn" id="18_ssvqc"]
[ext_resource type="Texture2D" uid="uid://by58nirfu1c4" path="res://assets/Background/backpack/backpack_front.png" id="18_v2yb1"]
[ext_resource type="Script" uid="uid://c5tnood4o4tnv" path="res://classes/Level.gd" id="19_js0lu"]
[ext_resource type="PackedScene" uid="uid://v6cdwcpvgjeu" path="res://scenes/Objects/exit.tscn" id="20_1kice"]
[ext_resource type="PackedScene" uid="uid://bni4j3r7dp4jg" path="res://scenes/Objects/coffee.tscn" id="21_5newe"]
[ext_resource type="PackedScene" uid="uid://damplki3il6ju" path="res://scenes/Objects/cutable.tscn" id="23_bt5mj"]
[ext_resource type="PackedScene" uid="uid://1sqahkj7o667" path="res://scenes/Objects/knife.tscn" id="23_e1j6l"]
[ext_resource type="PackedScene" uid="uid://cr0wiqnxvve8h" path="res://scenes/Objects/skateboard.tscn" id="24_e1j6l"]
[ext_resource type="AudioStream" uid="uid://c36uk4sahkpt7" path="res://assets/sound/soundtrack.wav" id="25_pl11u"]

[sub_resource type="Gradient" id="Gradient_nepv3"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_7025r"]
gradient = SubResource("Gradient_nepv3")
fill_to = Vector2(1, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_m4url"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pl11u"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5newe"]
size = Vector2(714, 24.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_264po"]
size = Vector2(466, 35.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bhx41"]
size = Vector2(354, 651.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1kice"]
size = Vector2(535, 31.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_37s47"]
size = Vector2(381.5, 41.75)

[node name="Game" type="Node" node_paths=PackedStringArray("levels")]
script = ExtResource("1_uwrxv")
levels = [NodePath("Level1"), NodePath("Level2"), NodePath("Level3")]

[node name="Timer" type="Timer" parent="."]
wait_time = 180.0
one_shot = true

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(604, 54)
zoom = Vector2(1.075, 1.075)
limit_left = 15
limit_right = 1075
limit_smoothed = true
position_smoothing_speed = 2.0

[node name="Background" type="Sprite2D" parent="."]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("4_264po")

[node name="1_level" type="Node2D" parent="Background"]

[node name="floor_1_lvl" type="Sprite2D" parent="Background/1_level"]
texture = ExtResource("5_1kice")

[node name="StaticBody2D" type="Sprite2D" parent="Background/1_level"]
texture = ExtResource("6_5newe")

[node name="2_level" type="Node2D" parent="Background"]

[node name="penholders" type="Sprite2D" parent="Background/2_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("7_37s47")

[node name="pens" type="Sprite2D" parent="Background/2_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("8_bt5mj")

[node name="sock_paper" type="Sprite2D" parent="Background/2_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("9_e1j6l")

[node name="Spot" type="Sprite2D" parent="Background/2_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("10_pl11u")

[node name="3_level" type="Node2D" parent="Background"]
position = Vector2(-216.269, -287.11)
scale = Vector2(0.374817, 0.374817)

[node name="floor_3_lvl" type="Sprite2D" parent="Background/3_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("11_bhx41")

[node name="Nutella" type="Sprite2D" parent="Background/3_level"]
position = Vector2(298.999, 1329)
scale = Vector2(2.65474, 2.65474)
texture = ExtResource("12_qnb83")

[node name="Nutella_back" type="Sprite2D" parent="Background/3_level"]
position = Vector2(580, 745)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("13_sww3w")

[node name="apple" type="Sprite2D" parent="Background/3_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("14_suyxu")

[node name="mushrooms" type="Sprite2D" parent="Background/3_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("15_sgl2t")

[node name="spiders" type="Sprite2D" parent="Background/3_level"]
position = Vector2(577, 766)
scale = Vector2(2.66797, 2.66797)
texture = ExtResource("16_qouja")

[node name="nutella" type="CharacterBody2D" parent="Background"]
visible = false
position = Vector2(0, -80.5857)
script = ExtResource("17_wljb1")

[node name="Sprite2D" type="Sprite2D" parent="Background/nutella"]
position = Vector2(-1.14441e-05, -20.9897)
scale = Vector2(0.330161, 0.330161)
texture = SubResource("GradientTexture2D_7025r")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Background/nutella"]
position = Vector2(0, -20.9898)
shape = SubResource("RectangleShape2D_m4url")

[node name="Level1" type="Node2D" parent="." node_paths=PackedStringArray("hand_start_pos", "camera_pos", "ceiling")]
position = Vector2(585, 399)
script = ExtResource("19_js0lu")
hand_start_pos = NodePath("HandPos")
camera_pos = NodePath("CameraPos")
ceiling = NodePath("Ceiling")
metadata/_custom_type_script = "uid://c5tnood4o4tnv"

[node name="HandPos" type="Marker2D" parent="Level1"]
position = Vector2(5, -228)
gizmo_extents = 36.4

[node name="CameraPos" type="Marker2D" parent="Level1"]
position = Vector2(-3, -46)
gizmo_extents = 36.4

[node name="Skateboard floor" type="StaticBody2D" parent="Level1"]
position = Vector2(-6, 230)
scale = Vector2(41.6, 3.6)
collision_layer = 4096
collision_mask = 262144

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level1/Skateboard floor"]
shape = SubResource("RectangleShape2D_pl11u")

[node name="Floor" type="StaticBody2D" parent="Level1"]
position = Vector2(0, 186)
collision_layer = 256
collision_mask = 196927

[node name="Ceiling" type="StaticBody2D" parent="Level1/Floor"]
process_mode = 4
position = Vector2(-15, 378)
collision_layer = 256
collision_mask = 196927

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level1/Floor/Ceiling"]
position = Vector2(8, 22.25)
shape = SubResource("RectangleShape2D_5newe")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level1/Floor"]
position = Vector2(119, 24.25)
shape = SubResource("RectangleShape2D_264po")

[node name="Ceiling" type="StaticBody2D" parent="Level1"]
process_mode = 4
position = Vector2(0, -289)
collision_layer = 256
collision_mask = 196927

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level1/Ceiling"]
polygon = PackedVector2Array(-338, 60, -325, -31, -131, -67, 207, -58, 305, -31, 325, 66, 411, 77, 391, -135, -394, -121, -411, 72)

[node name="Exit" parent="Level1" instance=ExtResource("20_1kice")]
position = Vector2(-211, 345)

[node name="Zipper" parent="Level1" instance=ExtResource("18_ssvqc")]
position = Vector2(-121, 179)

[node name="Coffee" parent="Level1" instance=ExtResource("21_5newe")]
position = Vector2(-56, 135)

[node name="Skateboard" parent="Level1" instance=ExtResource("24_e1j6l")]
position = Vector2(-249, 142)

[node name="Foreground" type="StaticBody2D" parent="Level1"]
z_index = 100
position = Vector2(-584.999, -399.001)
collision_layer = 256
collision_mask = 0

[node name="Backpack_front_details" type="Sprite2D" parent="Level1/Foreground"]
position = Vector2(577, 766)
scale = Vector2(2.668, 2.668)
texture = ExtResource("18_v2yb1")

[node name="left_collision_wall" type="CollisionPolygon2D" parent="Level1/Foreground"]
polygon = PackedVector2Array(195, 1399, 198, 1253, 228, 1112, 238, 998, 234, 945, 225, 893, 228, 795, 211, 754, 222, 727, 217, 656, 217, 517, 217, 412, 255, 356, 245, 177, 208, 156, 179, 229, 159, 1377)

[node name="right_collision_wall" type="CollisionPolygon2D" parent="Level1/Foreground"]
position = Vector2(1154, 6.10352e-05)
scale = Vector2(-1, 1)
polygon = PackedVector2Array(195, 1399, 198, 1253, 228, 1112, 238, 998, 234, 945, 225, 893, 228, 795, 211, 754, 222, 727, 217, 656, 217, 517, 217, 412, 255, 356, 245, 177, 208, 156, 179, 229, 159, 1377)

[node name="Skateboard detector" type="Area2D" parent="Level1"]
position = Vector2(28, 91)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level1/Skateboard detector"]
position = Vector2(149, -228.25)
shape = SubResource("RectangleShape2D_bhx41")

[node name="Level2" type="Node2D" parent="." node_paths=PackedStringArray("hand_start_pos", "camera_pos", "ceiling")]
position = Vector2(585, 788)
script = ExtResource("19_js0lu")
hand_start_pos = NodePath("HandPos")
camera_pos = NodePath("CameraPos")
ceiling = NodePath("Ceiling")
metadata/_custom_type_script = "uid://c5tnood4o4tnv"

[node name="HandPos" type="Marker2D" parent="Level2"]
position = Vector2(-250, -145)
gizmo_extents = 36.4

[node name="CameraPos" type="Marker2D" parent="Level2"]
position = Vector2(-3, 25)
gizmo_extents = 36.4

[node name="Floor" type="StaticBody2D" parent="Level2"]
position = Vector2(0, 186)
collision_layer = 256
collision_mask = 196927

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level2/Floor"]
position = Vector2(-83.5, 10.25)
shape = SubResource("RectangleShape2D_1kice")

[node name="Ceiling" type="StaticBody2D" parent="Level2"]
process_mode = 4
position = Vector2(-15, -233)
collision_layer = 256
collision_mask = 196927

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level2/Ceiling"]
position = Vector2(6, 48.5)
shape = SubResource("RectangleShape2D_5newe")

[node name="Exit" parent="Level2" instance=ExtResource("20_1kice")]
position = Vector2(190, 355)

[node name="Level3" type="Node2D" parent="." node_paths=PackedStringArray("hand_start_pos", "camera_pos", "ceiling")]
position = Vector2(585, 1196)
script = ExtResource("19_js0lu")
hand_start_pos = NodePath("HandPos")
camera_pos = NodePath("CameraPos")
ceiling = NodePath("../Level1/Floor/Ceiling")
metadata/_custom_type_script = "uid://c5tnood4o4tnv"

[node name="HandPos" type="Marker2D" parent="Level3"]
position = Vector2(236, -165)
gizmo_extents = 36.4

[node name="CameraPos" type="Marker2D" parent="Level3"]
position = Vector2(-3, 15)
gizmo_extents = 36.4

[node name="Floor" type="StaticBody2D" parent="Level3"]
position = Vector2(-180, 186)
collision_layer = 256
collision_mask = 196927

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level3/Floor"]
position = Vector2(-55.25, 38.875)
shape = SubResource("RectangleShape2D_37s47")

[node name="Exit" parent="Level3" instance=ExtResource("20_1kice")]
position = Vector2(155, 371)

[node name="Knife" parent="Level3" instance=ExtResource("23_e1j6l")]
position = Vector2(-260, -46)
rotation = -3.11584

[node name="Cutable" parent="Level3" instance=ExtResource("23_bt5mj")]
position = Vector2(317, 221)

[node name="Cutable2" parent="Level3" instance=ExtResource("23_bt5mj")]
position = Vector2(252, 221)

[node name="Cutable3" parent="Level3" instance=ExtResource("23_bt5mj")]
position = Vector2(188, 221)

[node name="Cutable4" parent="Level3" instance=ExtResource("23_bt5mj")]
position = Vector2(123, 221)

[node name="Cutable5" parent="Level3" instance=ExtResource("23_bt5mj")]
position = Vector2(58, 221)

[node name="Cutable6" parent="Level3" instance=ExtResource("23_bt5mj")]
position = Vector2(-9, 221)

[node name="StaticBody2D" type="StaticBody2D" parent="Level3"]
position = Vector2(-253, 108)
collision_layer = 256
collision_mask = 31

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level3/StaticBody2D"]
polygon = PackedVector2Array(-64, -27, -57, 83, 51, 80, 57, -28, 70, -29, 62, 93, -65, 95, -74, -29)

[node name="Sprite2D" type="Sprite2D" parent="Level3/StaticBody2D"]
position = Vector2(-33, 26)
scale = Vector2(2.68514, 2.68514)
texture = ExtResource("12_qnb83")

[node name="movement" type="Button" parent="."]
offset_left = 290.0
offset_top = 370.0
offset_right = 401.0
offset_bottom = 401.0
text = "Move next lvl"

[node name="Hand" parent="." instance=ExtResource("2_264po")]
position = Vector2(615, -111)

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("25_pl11u")
autoplay = true

[connection signal="timeout" from="Timer" to="." method="time_out"]
[connection signal="exit_level" from="Level1/Exit" to="." method="exit_level"]
[connection signal="body_entered" from="Level1/Skateboard detector" to="." method="_on_skateboard_detector_body_entered"]
[connection signal="exit_level" from="Level2/Exit" to="." method="exit_level"]
[connection signal="exit_level" from="Level3/Exit" to="." method="exit_level"]
[connection signal="pressed" from="movement" to="." method="exit_level"]
